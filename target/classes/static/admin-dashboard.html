<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管理员首页 - 智慧宾馆管理系统</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <style>
        body { background: #f5f6fa; min-height: 100vh; font-family: '微软雅黑', Arial, Roboto, sans-serif; }
        .navbar {
            background: #2563eb;
            color: #fff;
            box-shadow: 0 2px 12px rgba(37,99,235,0.10);
        }
        .navbar-brand { color: #fff !important; font-weight: bold; font-size: 1.2rem; letter-spacing: 2px; }
        .main-box { background: #fff; border-radius: 18px; box-shadow: 0 6px 32px rgba(37,99,235,0.10); padding: 40px; max-width: 1100px; margin: 40px auto 0 auto; }
        .main-title { font-size: 1.5rem; font-weight: bold; margin-bottom: 24px; color: #2563eb; text-align: left; }
        .card-group { gap: 32px; }
        .func-card { border: none; border-radius: 16px; box-shadow: 0 2px 16px rgba(37,99,235,0.08); transition: box-shadow 0.2s; min-width: 260px; min-height: 180px; display: flex; flex-direction: column; align-items: flex-start; justify-content: flex-start; }
        .func-card .func-icon { align-self: flex-start; }
        .func-card .btn { margin-top: auto; width: 100%; }
        @media (max-width: 900px) { .main-box { max-width: 98vw; padding: 16px; } }
        .func-card:hover { box-shadow: 0 6px 32px rgba(37,99,235,0.16); }
        .func-icon { font-size: 2.5rem; color: #2563eb; margin-bottom: 12px; }
        .btn-primary { background: #2563eb; border: none; border-radius: 8px; font-weight: bold; }
        .btn-primary:hover { background: #1d4ed8; }
        .btn-outline-danger, .btn-outline-secondary { border-radius: 8px; }
        
        /* 不同颜色的功能卡片 */
        .func-card.room-card { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); }
        .func-card.room-card .func-icon { color: #2563eb; }
        .func-card.room-card .btn-primary { background: #2563eb; }
        .func-card.room-card .btn-primary:hover { background: #1d4ed8; }
        
        .func-card.employee-card { background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); }
        .func-card.employee-card .func-icon { color: #162da3; }
        .func-card.employee-card .btn-primary { background: #3016a3; }
        .func-card.employee-card .btn-primary:hover { background: #391580; }
        
        .func-card.comment-card { background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%); }
        .func-card.comment-card .func-icon { color: #ea580c; }
        .func-card.comment-card .btn-primary { background: #ea580c; }
        .func-card.comment-card .btn-primary:hover { background: #c2410c; }
        
        .func-card.announcement-card { background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); }
        .func-card.announcement-card .func-icon { color: #9333ea; }
        .func-card.announcement-card .btn-primary { background: #9333ea; }
        .func-card.announcement-card .btn-primary:hover { background: #7c3aed; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="#"><i class="bi bi-building me-2"></i>智慧宾馆管理系统</a>
            <div class="d-flex">
                <button class="btn btn-outline-secondary me-2" onclick="goProfile()"><i class="bi bi-person-circle me-1"></i>个人信息</button>
                <button class="btn btn-outline-danger" onclick="logout()"><i class="bi bi-box-arrow-right me-1"></i>退出登录</button>
            </div>
        </div>
    </nav>
    <div class="main-box">
        <div id="announcementBar" class="mb-4" style="display:none;"></div>
        <div class="main-title">管理员工作台</div>
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 card-group justify-content-start">
            <div class="col">
                <div class="card func-card text-center p-4 room-card">
                    <div class="func-icon"><i class="bi bi-house-door"></i></div>
                    <h5 class="card-title">房间管理</h5>
                    <p class="card-text">管理宾馆房间信息。</p>
                    <a href="admin-room.html" class="btn btn-primary w-100">去管理</a>
                </div>
            </div>
            <div class="col">
                <div class="card func-card text-center p-4 employee-card">
                    <div class="func-icon"><i class="bi bi-people"></i></div>
                    <h5 class="card-title">员工管理</h5>
                    <p class="card-text">管理宾馆员工信息。</p>
                    <a href="admin-employee.html" class="btn btn-primary w-100">去管理</a>
                </div>
            </div>
            <div class="col">
                <div class="card func-card text-center p-4 comment-card">
                    <div class="func-icon"><i class="bi bi-chat-dots"></i></div>
                    <h5 class="card-title">评论管理</h5>
                    <p class="card-text">管理客户评论信息。</p>
                    <a href="admin-comment.html" class="btn btn-primary w-100">去管理</a>
                </div>
            </div>
            <div class="col">
                <div class="card func-card text-center p-4 announcement-card">
                    <div class="func-icon"><i class="bi bi-megaphone"></i></div>
                    <h5 class="card-title">公告管理</h5>
                    <p class="card-text">管理系统公告信息。</p>
                    <a href="admin-announcement.html" class="btn btn-primary w-100">去管理</a>
                </div>
            </div>
        </div>
    </div>
    <script>
    // 登录态校验
    const user = JSON.parse(localStorage.getItem('user') || 'null');
    if (!user || user.role !== 'ADMIN') {
        window.location.href = 'login.html';
    }
    function goProfile() { window.location.href = 'profile.html'; }
    function logout() { localStorage.removeItem('user'); window.location.href = 'login.html'; }
    // 公告栏加载
    async function loadAnnouncements() {
        const res = await fetch('/api/announcements');
        const data = res.ok ? await res.json() : [];
        const bar = document.getElementById('announcementBar');
        bar.innerHTML = '';
        const colorArr = ['info','success','warning','secondary','primary','danger','dark','light','primary','success'];
        if (data.length > 0) {
            bar.style.display = '';
            data.forEach((a, idx) => {
                const color = colorArr[idx % colorArr.length];
                const content = a.content;
                const shortContent = content.length > 40 ? content.slice(0, 40) + '...' : content;
                const isLong = content.length > 40;
                const id = 'announcement_' + idx;
                bar.innerHTML += `<div class='alert alert-${color} d-flex align-items-center mb-2' style='font-size:1.1rem;word-break:break-all;'>
                    <i class='bi bi-megaphone-fill me-2'></i>
                    <span id='${id}_text'>${shortContent}</span>
                    ${isLong ? `<a href='javascript:void(0);' id='${id}_btn' style='margin-left:8px;font-size:0.95rem;'>展开</a>` : ''}
                </div>`;
                if(isLong) {
                    setTimeout(() => {
                        document.getElementById(`${id}_btn`).onclick = function() {
                            const text = document.getElementById(`${id}_text`);
                            if(this.innerText === '展开') {
                                text.innerText = content;
                                this.innerText = '收起';
                            } else {
                                text.innerText = shortContent;
                                this.innerText = '展开';
                            }
                        }
                    }, 0);
                }
            });
        } else {
            bar.style.display = 'none';
        }
    }
    loadAnnouncements();
    </script>
</body>
</html> 